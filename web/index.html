<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production RAG - Document Intelligence Platform</title>
    <link rel="stylesheet" href="style.css">

</head>

<body>
    <div class="app-container">
        <!-- Header -->
        <div class="app-header">
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div>
                    <h1 class="app-title">Production RAG</h1>
                    <p class="app-subtitle">Document Intelligence Platform - Upload, Search, and Analyze</p>
                </div>
                <div id="connectionStatus"
                    style="padding: 8px 16px; background: #d4edda; color: #155724; border-radius: 20px; font-size: 0.9rem;">
                    ‚óè Connected
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Upload Section -->
            <div class="upload-section">
                <h2 class="section-title">üìÅ Document Upload</h2>

                <div class="upload-zone" id="uploadZone">
                    <div class="upload-icon">üìé</div>
                    <div class="upload-text">Drop files here or click to browse</div>
                    <div class="upload-subtext">Supports: PDF, DOCX, TXT, MD, CSV</div>

                    <div class="upload-controls">
                        <button class="btn btn-primary" onclick="selectFiles(event)">Choose Files</button>
                        <button class="btn btn-secondary" onclick="selectFolder(event)">Choose Folder</button>
                    </div>
                </div>

                <input type="file" id="fileInput" class="file-input" multiple accept=".txt,.md,.pdf,.docx,.csv">
                <input type="file" id="folderInput" class="file-input" webkitdirectory directory multiple>

                <div class="file-list" id="fileList"></div>

                <!-- Quick Actions -->
                <div class="quick-actions">
                    <button class="quick-btn" onclick="clearUploadQueue()">Clear Queue</button>
                    <button class="quick-btn" onclick="uploadTestDocument()">Upload Test File</button>
                    <button class="quick-btn" onclick="checkUploadStatus()">Check Status</button>
                </div>
            </div>

            <!-- Chat Section -->
            <div class="chat-section">
                <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 20px;">
                    <h2 class="section-title" style="margin-bottom: 0;">üí¨ Document Search</h2>
                    <div id="chatModeIndicator" class="mode-indicator mode-gen">
                        üí¨ General Mode
                    </div>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="message message-bot">
                            <div class="message-content">
                                <span class="mode-indicator mode-gen">üí¨</span>
                                Hello! I'm your AI assistant. I can help with:
                                <ul style="margin: 8px 0 8px 20px;">
                                    <li><strong>General questions</strong> - Math, coding, explanations</li>
                                    <li><strong>Document analysis</strong> - Ask about uploaded files</li>
                                    <li><strong>File management</strong> - List, download, delete documents</li>
                                </ul>
                                Try "hello" or "what's in my documents?"
                            </div>
                        </div>
                    </div>

                    <!-- Status Indicator -->
                    <div class="status-indicator" id="statusIndicator" style="display: none;">
                        <div class="typing-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <span>Thinking...</span>
                    </div>

                    <div class="chat-input-container">
                        <input type="text" class="chat-input" id="chatInput"
                            placeholder="Ask anything... (Press Enter to send)" onkeypress="handleKeyPress(event)">
                        <button class="btn btn-primary" onclick="sendMessage()" id="sendButton">Send</button>
                    </div>

                    <!-- Quick Questions -->
                    <div class="quick-actions">
                        <button class="quick-btn" onclick="quickQuestion('hello')">Say Hello</button>
                        <button class="quick-btn" onclick="quickQuestion('what documents do you have?')">List
                            Docs</button>
                        <button class="quick-btn" onclick="quickQuestion('write fibonacci in python')">Code
                            Example</button>
                        <button class="quick-btn" onclick="quickQuestion('explain quantum computing')">Explain
                            Topic</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Document Management -->
        <div class="doc-management">
            <h2 class="section-title">üìö Document Library</h2>

            <!-- Stats -->
            <div class="stats-grid" id="statsGrid">
                <div class="stat-card">
                    <div class="stat-value" id="docCount">0</div>
                    <div class="stat-label">Documents</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalChunks">0</div>
                    <div class="stat-label">Total Chunks</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="avgResponse">0ms</div>
                    <div class="stat-label">Avg Response</div>
                </div>
            </div>

            <div class="doc-list" id="docList">
                <div class="doc-item">
                    <div class="doc-info">
                        <h4>Loading documents...</h4>
                        <p>Please wait while we load your document library</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Panel -->
        <div class="doc-management" style="margin-top: 20px;">
            <h2 class="section-title">‚öôÔ∏è System Panel</h2>
            <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
                <button class="btn btn-secondary" onclick="healthCheck()">Health Check</button>
                <button class="btn btn-secondary" onclick="clearChat()">Clear Chat</button>
                <button class="btn btn-secondary" onclick="exportConversation()">Export Chat</button>
                <button class="btn btn-secondary" onclick="toggleDebug()">Toggle Debug</button>
            </div>
            <div id="systemOutput"
                style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; max-height: 200px; overflow-y: auto; display: none;">
                System output will appear here...
            </div>
        </div>
    </div>
    <script src="script.js"></script>

</body>

</html>